import type {
	EnkoreAutogeneratedFile
} from "@enkore/spec"

import type {NodeAPIMessage} from "@enkore/spec/primitives"

import type {ScandirEntry} from "@aniojs/node-fs"
import type {Step} from "./Step.d.mts"

export type InternalSessionState = {
	currentStep: Step|undefined

	aggregatedMessages: NodeAPIMessage[]

	// prevent addition of files
	// changes in config
	// after we initialized
	finalized: boolean

	projectDirectoryEntries?: ScandirEntry[]

	productNames: string[]

	filesToAutogenerate: Map<string, {
		normalizedDestinationPath: string
		generator: EnkoreAutogeneratedFile["generator"]
		output: string|undefined
		outputHash: string|undefined
	}>
}
