import type {
	EnkoreAutogeneratedFile,
	EnkoreProjectFile,
	EnkoreBuildFile
} from "@anio-software/enkore-private.spec"

import type {Step} from "#~synthetic/user/Steps.d.mts"
import type {ScandirEntry} from "@aniojs/node-fs"

export type InternalSessionState = {
	// prevent addition of files
	// changes in config
	// after we initialized
	finalized: boolean

	currentStep: Step|undefined

	projectDirectoryEntries: ScandirEntry[]|undefined
	filteredProjectFiles: EnkoreProjectFile[]|undefined
	allProjectFiles: EnkoreProjectFile[]|undefined
	allBuildFiles: EnkoreBuildFile[]

	productNames: string[]

	hasEncounteredError: boolean

	filesToAutogenerate: Map<string, {
		normalizedDestinationPath: string
		generator: EnkoreAutogeneratedFile["generator"]
		output: string|undefined
		outputHash: string|undefined
	}>

	internalTargetData: object
}
